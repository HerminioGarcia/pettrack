{% extends 'base.html' %}
{% load static %}

{% block encabezado %}
<h1>Localización de mascotas</h1>
{% endblock encabezado %}

{% block titulo %}
Localización de mascotas
{% endblock titulo %}

{% block contenido %}
<!-- Mostrar mensajes del Arduino -->
<!-- mi_template.html -->
<script>
    const chatSocket = new WebSocket('ws://' + window.location.host + '/ws/arduino/');

    chatSocket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        document.querySelector('#mensajes').innerHTML += (data.mensaje + '<br>');
    };

    chatSocket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };
</script>

<div id="mensajes"></div>

  <!-- Los mensajes recibidos se mostrarán aquí -->
</div>

<div class="row">
    <div class="col-md-12">
        {{ map|safe }}
    </div>
</div>

{% endblock contenido %}

